conda create -n mirage python=3.11
conda activate mirage
pip install --upgrade pip
pip install torch==2.7.0 torchvision==0.22.0 --index-url https://download.pytorch.org/whl/cu128
pip install isaaclab[isaacsim,all]==2.2.0 --extra-index-url https://pypi.nvidia.com
isaacsim
Yes
pip install -e .
pip install -e isaac_utils
pip install -e poselib
pip install -e protomotions
pip install -e gr00t
pip install flash-attn --no-build-isolation
pip install -r requirements.txt


#data preparation quick command/ keep at root path
#download amass data https://amass.is.tue.mpg.de/download.php I start from CMU SMPLX-N，不要用smplH，只写了smpl和smplx重映射
#download smpl pkl npz https://smpl-x.is.tue.mpg.de/download.php
python data/scripts/convert_amass_to_isaac.py data/amass/ --robot-type=g1 --force-retarget --humanoid-type=smplx
#生成动作的fps
#注意smplx对应的是motion_fps_amass.yaml，没有写错别改
python data/scripts/create_motion_fps_yaml.py data/amass/ --output-path=data/yaml_files/ --humanoid-type=smplx --amass-fps-file=data/yaml_files/motion_fps_amass.yaml --output-path=data/yaml_files
#create yaml
python data/scripts/process_hml3d_data.py data/yaml_files/train_g1.yaml data/amass/  --humanoid-type=smplx --motion-fps-path=data/yaml_files/motion_fps_amassx.yaml --robot-type=g1
#package all training data
python data/scripts/package_motion_lib.py data/yaml_files/train_g1.yaml data/amass/ data/yaml_files/train_g1.pt --humanoid-type=g1


#eval motion protomotions隐藏功能
python protomotions/protomotions/eval_agent.py +base=[fabric,structure] +exp=deepmimic_mlp +robot=g1 +simulator=isaaclab +checkpoint=null +training_max_steps=1 +motion_file=data/yaml_files/train_g1.pt env.config.sync_motion=True ref_respawn_offset=0 +headless=False num_envs=1  +experiment_name=debug +terrain=flat

#pretrain-teacher
python protomotions/protomotions/eval_agent.py +robot=smpl +simulator=isaaclab +motion_file=data/motions/smpl_humanoid_walk.npy +checkpoint=data/pretrained_models/motion_tracker/smpl/last.ckpt +terrain=flat
#pretrain-masked-mimic
python protomotions/protomotions/eval_agent.py +robot=smpl +simulator=isaaclab +motion_file=data/motions/smpl_humanoid_walk.npy +checkpoint=data/pretrained_models/masked_mimic/smpl/last.ckpt +terrain=flat
#aaaa
python protomotions/protomotions/eval_agent.py +robot=smpl +simulator=isaaclab  +checkpoint=data/pretrained_models/masked_mimic/smpl/last.ckpt +terrain=flat +exp=path_follower_amp_mlp

train
python mirage/train_agent.py +exp=full_body_tracker/transformer_amp_flat_terrain +robot=g1 +simulator=isaaclab motion_file=data/yaml_files/train_g1_short.pt +experiment_name=full_body_tracker num_envs=1 ++headless=True